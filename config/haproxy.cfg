global
    log stdout format raw
    maxconn 2000

defaults
    log global
    mode http
    option httplog
    timeout connect 5000ms
    timeout client  50000ms
    timeout server  50000ms

frontend http-in
    bind *:80
    default_backend servers

backend servers
    balance roundrobin
    option httpchk GET ${HEALTH_ENDPOINT}
    server server1 ${DNS_SERVER1}:80 check
    server server2 ${DNS_SERVER2}:80 check

listen stats
    bind *:8080
    stats enable
    stats uri /stats
    stats realm HAProxy\ Stats
    stats auth admin:password
